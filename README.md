# transform-perspective
This project computes the homography between a region on a source image and that of a destination image. It then transforms the perspective of the source image region to match the region on the destination image, creates two masks, and fits the images together. The program allows the user to select the region points on both the source and destination image, in order to make the final image fully customizable and dependent on user input.
To collect user input, the program uses the setMouseCallback function provided by OpenCV, and looks for a mouse left-click event. The click coordinates are appended to global arrays for either source or destination points, depending on the stage of the program. Pressing the ‘b’ key on the keyboard with erase the selected points, thus allowing the user to restart if a mistake is made in selecting points. Otherwise, pressing any other key will cause the program to continue after 4 points are selected.
After the source coordinates are collected, those points are used to extract that region of the image and warp the perspective to a uniform square, producing an upright, “face-on” view of the selected region. The four corners of this new image, with the top left corner designated as (0,0), are stored in a new source points array.
The destination image is then displayed for the user to select the points defining the region upon which the source image is to be projected. The transformation matrix is computed using OpenCV’s findHomography function, and the perspective of the warped source image from the previously described function is warped accordingly to this region. Two image masks are created from the source and destination image, and the two are subsequently added together, producing the final output. 
An issue encountered when running the program resulted from the order of point selection for source and destination points. It locations were selected out of a specific order, the image warp was convoluted and distorted. In order to overcome this, an algorithm was implemented to order the array of points to correspond to expected parameters when computing homography. To this end, the sum of the points was calculated at each location, and the array was ordered accordingly by the size of the sum. This ensured consistent organization for the array, regardless of the order in which points were selected.
 
